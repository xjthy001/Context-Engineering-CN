# 02. 扩展上下文（Expand Context）

## 概述

本指南展示如何有效地扩展和丰富提示中的上下文信息，以提高模型的理解和输出质量。

## 核心概念

1. **上下文扩展策略** - 添加相关信息以改善理解
2. **信息层次结构** - 组织上下文信息的优先级
3. **动态上下文组装** - 根据需求动态构建上下文
4. **上下文质量评估** - 测量扩展上下文的有效性
5. **成本与收益平衡** - 优化Token使用与结果质量的权衡

## 关键技术

### 上下文扩展方法

- **背景信息** - 提供相关的背景知识
- **示例和案例研究** - 通过具体例子说明
- **定义和说明** - 澄清关键概念
- **约束和边界** - 明确限制条件
- **成功标准** - 定义期望的输出

### 信息组织

```
上下文结构：
├── 核心任务定义
├── 相关背景信息
├── 具体示例
├── 约束条件
├── 输出格式要求
└── 评估标准
```

## 实践应用

1. **开始于原子提示** - 从基础提示开始
2. **逐步添加上下文** - 增量式增加信息
3. **测量影响** - 评估每次添加的效果
4. **优化信息** - 删除低价值的上下文
5. **验证结果** - 确保改进是显著的

## 常见模式

### 问题-背景-约束（PBC）框架

```
问题：明确定义需要解决的问题
背景：提供相关的背景信息
约束：说明任何限制条件
```

### 角色-上下文-任务（RCT）框架

```
角色：定义AI应该扮演的角色
上下文：提供相关的环境信息
任务：明确要完成的任务
```

## 高级技巧

- **递进式上下文** - 根据需求逐步增加复杂性
- **条件化上下文** - 根据不同情况使用不同的上下文
- **层级化上下文** - 组织多层级的信息结构
- **动态适应** - 根据响应调整上下文

## Token 优化

- **信息密度** - 最大化每个Token的价值
- **冗余消除** - 移除重复或不必要的信息
- **压缩技术** - 使用更简洁的表述方式
- **优先级排序** - 按重要性排列信息

## 下一步

- 学习 `03_control_loops.md` - 控制反馈循环
- 探索 `04_rag_recipes.md` - RAG 相关技巧
- 研究 `05_prompt_programs.md` - 提示程序设计

## 最佳实践

1. 从简单开始，逐步扩展
2. 测量每次更改的影响
3. 保持上下文的清晰和相关
4. 定期审查和优化
5. 记录有效的模式供将来使用
